<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI-Powered Quiz App</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/base.css')}}" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/home.css')}}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/notifications.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/payment.css') }}">
    <script src="https://kit.fontawesome.com/acee086188.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <input type="checkbox" id="theme-toggle" class="theme-toggle-input" />

    <div class="page-wrapper home-page">
      <header class="top-bar">
        <div class="toggleMode">
          <i class="fa-solid fa-sun icon"></i>
          <label class="switch" for="theme-toggle">
            <span class="slider"></span>
          </label>
          <i class="fa-solid fa-moon icon"></i>
        </div>
      </header>
    <div id="notification-container" class="notification-container"></div>
      <main class="hero">
        <div class="hero-text">
          <h1>Welcome, {{user.username}}</h1>
          <p>Generate quizzes instantly with AIâ€”just drop a prompt and start testing.</p>
        </div>

      <form id="prompt-form" class="prompt-bar" action="{{url_for('home')}}" method="post">
          <input
            type="text"
            name="prompt"
            placeholder="Enter a topic or prompt"
            required
          />
          <button type="submit">
            <i class="fa-solid fa-arrow-right"></i>
          </button>
        </form>

        <div class="credits-section">
          <div class="credits">Credits: {{user.credits}}</div>
          <a href="{{ url_for('payment.payment_page') }}" class="buy-credits-btn">
            <i class="fa-solid fa-shopping-cart"></i>
            Buy Credits
          </a>
        </div>
      </main>

      <form action="{{url_for('logout')}}" method="get">
        <button class="logout-btn" type="submit" aria-label="Logout">
          <i class="fa-solid fa-arrow-right-from-bracket"></i>
        </button>
      </form>
    </div>
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script>
      // Handle flash messages from Flask
      document.addEventListener('DOMContentLoaded', function() {
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              showNotification('{{ message }}', '{{ category }}');
            {% endfor %}
          {% endif %}
        {% endwith %}
      });
    </script>
  </body>
</html>